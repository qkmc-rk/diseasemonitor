(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login","chunk-bdae4d74","chunk-89ed17f6"],{"5af1":function(t,e,n){},"81a5":function(t,e,n){},"902e":function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("logintemplate",[n("div",{attrs:{slot:"name"},slot:"name"},[t._v("忘记密码")]),n("div",{attrs:{slot:"form"},slot:"form"},[n("myinput",{attrs:{type:"phone",placeholder:"请输入你的手机号",err:t.phoneErr,errorMsg:t.phoneErrMsg,formValue:t.form.phone},on:{rulecheck:t.checkphone}}),n("myinput",{attrs:{type:"check",placeholder:"请输入验证码",errorMsg:t.checkErrMsg,err:t.checkErr,checkUrl:t.checkUrl,formValue:t.form.check},on:{rulecheck:t.checkNum,repeatcheck:t.checkonce}})],1),n("div",{attrs:{slot:"login"},slot:"login"},[n("el-button",{staticClass:"loginbtn",attrs:{type:"primary",loading:t.isLoading},on:{click:t.next}},[t._v("下一步")])],1),n("div",{attrs:{slot:"changestate"},slot:"changestate"},[n("el-link",{staticClass:"pswbtn",attrs:{type:"info"},on:{click:t.back}},[t._v("返回登录")])],1)])},r=[];n("3a20"),n("ef8e"),n("252a"),n("8f0e");function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s=n("b079"),a=n("4f912"),i=n("1ae0"),u={components:{logintemplate:s["a"],myinput:a["a"]},data:function(){return o({phoneErr:!1,phoneErrMsg:"",checkErr:!1,checkErrMsg:"",form:{phone:"",check:""},checkUrl:"",isLoading:!1},"checkErr",!1)},computed:{},watch:{},methods:{next:function(){var t=this;this.phoneErr||this.checkErr||Object(i["x"])({verifyCode:this.form.check,phone:this.form.phone}).then((function(e){if(e.data.SUCCESS)console.log("模拟验证码为"+e.data.CODE),t.$router.push("step2");else{var n=/手机|用户/;n.test(e.data.ERROR)?(t.phoneErr=!0,t.phoneErrMsg=e.data.ERROR):(t.checkErr=!0,t.checkErrMsg=e.data.ERROR)}t.checkonce()}))},back:function(){this.$router.push("index")},checkNum:function(t){this.form.check=t,4!==t.length?this.checkErr=!0:this.checkErr=!1},checkonce:function(){var t=this;Object(i["m"])().then((function(e){var n=e.data,c=window.URL.createObjectURL(n);t.checkUrl=c}))},checkphone:function(t){this.form.phone=t,/^1[3456789]\d{9}$/.test(t)?this.phoneErr=!1:(this.phoneErr=!0,this.phoneErrMsg="请输入正确的手机号")}},created:function(){},mounted:function(){var t=this;Object(i["m"])().then((function(e){var n=e.data,c=window.URL.createObjectURL(n);t.checkUrl=c}))},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},h=u,f=n("623f"),l=Object(f["a"])(h,c,r,!1,null,"04ca554e",null);e["default"]=l.exports},"9ed6":function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"root"},[n("div",{staticClass:"login"},[t._m(0),n("div",{staticClass:"logwindow"},[n("router-view")],1)])])},r=[function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",{staticClass:"banner"},[c("img",{attrs:{src:n("cf05"),alt:""}}),c("div",{staticClass:"version"},[t._v("版本V1.0.1")])])}],o=n("dc3f"),s=n("902e"),a={components:{login:o["default"],changePsw:s["default"]},data:function(){return{state:"login"}},computed:{},watch:{},methods:{changetoPsw:function(){this.state="password"}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},i=a,u=(n("a939"),n("623f")),h=Object(u["a"])(i,c,r,!1,null,"5634c35a",null);e["default"]=h.exports},a939:function(t,e,n){"use strict";var c=n("5af1"),r=n.n(c);r.a},b079:function(t,e,n){"use strict";var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{},[n("div",{staticClass:"logtips"},[t._t("name")],2),n("div",{staticClass:"window"},[t._t("form")],2),n("div",{staticClass:"control"},[t._t("login")],2),n("div",{staticClass:"changepsw"},[t._t("changestate")],2),t._t("other")],2)])},r=[],o={components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},s=o,a=(n("e7f8"),n("623f")),i=Object(a["a"])(s,c,r,!1,null,"184144a0",null);e["a"]=i.exports},bdce:function(t,e,n){"use strict";var c=n("da7b"),r=n.n(c);r.a},da7b:function(t,e,n){},dc3f:function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("logintemplate",[n("span",{attrs:{slot:"name"},slot:"name"},[t._v("登录")]),n("div",{attrs:{slot:"form"},slot:"form"},[n("myInput",{attrs:{type:"phone",formValue:t.form.username,err:t.accounterr,errorMsg:this.accountErrMsg,placeholder:"请输入手机号"},on:{rulecheck:t.checkaccount}}),n("myInput",{attrs:{type:"password",placeholder:"请输入密码",formValue:t.form.password,errorMsg:this.pswErrMsg,err:this.pswerr},on:{rulecheck:t.checkpsw}}),t.needCheck?n("myInput",{attrs:{type:"check",placeholder:"请输入验证码",formValue:t.form.check,errorMsg:t.checkErrMsg,err:this.checkerr,checkUrl:t.checkUrl},on:{rulecheck:t.checkNum,repeatcheck:t.OnceCheck}}):t._e()],1),n("div",{attrs:{slot:"login"},slot:"login"},[n("el-button",{staticClass:"loginbtn",attrs:{type:"primary",loading:t.isLoading},on:{click:t.login}},[t._v("登录")])],1),n("div",{attrs:{slot:"changestate"},slot:"changestate"},[n("el-link",{staticClass:"pswbtn phonebtn",attrs:{type:"info"},on:{click:t.loginByPhone}},[t._v("手机登录")]),n("el-link",{staticClass:"pswbtn",attrs:{type:"info"},on:{click:t.changePsw}},[t._v("忘记密码?")])],1)])},r=[],o=(n("3a20"),n("ef8e"),n("252a"),n("8f0e"),n("4f912")),s=n("b079"),a=n("1ae0"),i={components:{myInput:o["a"],logintemplate:s["a"]},data:function(){return{form:{username:"",password:"",check:""},pswerr:!1,pswErrMsg:"",accounterr:!1,accountErrMsg:"",checkerr:!1,isLoading:!1,needCheck:!1,checkUrl:"",checkErrMsg:""}},computed:{},watch:{},methods:{ifCheck:function(){var t=this;Object(a["G"])().then((function(e){t.needCheck=e.data})).catch((function(){t.$message.error("网络不畅,请稍后重试!")})).then((function(){t.needCheck&&Object(a["m"])().then((function(e){var n=e.data,c=window.URL.createObjectURL(n);t.checkUrl=c}))}))},checkNum:function(t){this.form.check=t,4!==t.length?(this.checkerr=!0,this.checkErrMsg="请输入四位验证码"):this.checkerr=!1},checkaccount:function(t){this.form.username=t,t?/^1[3456789]\d{9}$/.test(t)?this.accounterr=!1:(this.accounterr=!0,this.accountErrMsg="请输入正确的手机号"):(this.accounterr=!0,this.accountErrMsg="手机号不能为空")},checkpsw:function(t){this.form.password=t,t?this.pswerr=!1:(this.pswerr=!0,this.pswErrMsg="密码不能为空")},login:function(){var t=this;this.isLoading=!0;Object(a["b"])({verifyCode:this.form.check,username:this.form.username,password:this.form.password}).then((function(e){if(1==e.status)sessionStorage.setItem("token",e.data),t.$router.push("/manager");else{var n=e.data.message,c=/用户/,r=/密码/;c.test(n)?(t.accounterr=!0,t.accountErrMsg=n):r.test(n)?(t.pswerr=!0,t.pswErrMsg=n):(t.checkerr=!0,t.checkErrMsg=n),t.ifCheck()}})).catch((function(e){t.$message({message:"服务器错误,请稍后重试",type:"error"})})).finally((function(){t.isLoading=!1}))},changePsw:function(){this.$router.push("step1")},OnceCheck:function(){this.ifCheck()},loginByPhone:function(){this.$router.push("byPhone")}},created:function(){},mounted:function(){this.OnceCheck()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},deactivated:function(){}},u=i,h=(n("bdce"),n("623f")),f=Object(h["a"])(u,c,r,!1,null,"1b454608",null);e["default"]=f.exports},e7f8:function(t,e,n){"use strict";var c=n("81a5"),r=n.n(c);r.a}}]);
//# sourceMappingURL=login.994c3e02.js.map